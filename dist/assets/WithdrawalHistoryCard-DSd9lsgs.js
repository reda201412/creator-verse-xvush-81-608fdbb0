import{k as y,r as n,u as D,j as e,C as H,a as k,b as S,B as l,A as p,c as A,l as F,m as z,n as g,o as d,p as E,q as i,E as R,s as B,t as L,v as O,w as W,L as b,I as f,x as q,y as c,z as I,F as U,G as o}from"./index-Buw2fQRV.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=y("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),V=()=>{const[N,a]=n.useState(!1),[t,m]=n.useState(""),[r,u]=n.useState(""),[x,h]=n.useState(!1),{requestWithdrawal:T}=D(),j=[{id:"w1",date:"2023-11-01T14:32:00Z",amount:520,status:"completed",txHash:"TRX123456789abcdef"},{id:"w2",date:"2023-10-15T09:12:00Z",amount:430,status:"completed",txHash:"TRX987654321fedcba"},{id:"w3",date:"2023-09-28T16:45:00Z",amount:300,status:"completed",txHash:"TRXabcdef123456789"},{id:"w4",date:"2023-12-05T10:21:00Z",amount:650,status:"pending"}],v=async()=>{if(!t||!r){o.error("Veuillez remplir tous les champs");return}const s=parseFloat(t);if(isNaN(s)||s<=0){o.error("Veuillez entrer un montant valide");return}h(!0);try{await T({amount:s,destinationAddress:r}),o.success("Demande de retrait soumise avec succès"),a(!1),m(""),u("")}catch(w){o.error("Erreur lors de la demande de retrait"),console.error(w)}finally{h(!1)}},C=s=>{switch(s){case"completed":return e.jsxs(c,{variant:"outline",className:"bg-green-500/20 text-green-500 border-0",children:[e.jsx(U,{className:"h-3 w-3 mr-1"}),"Complété"]});case"pending":return e.jsxs(c,{variant:"outline",className:"bg-amber-500/20 text-amber-500 border-0",children:[e.jsx(I,{className:"h-3 w-3 mr-1"}),"En attente"]});case"failed":return e.jsxs(c,{variant:"outline",className:"bg-red-500/20 text-red-500 border-0",children:[e.jsx(Z,{className:"h-3 w-3 mr-1"}),"Échoué"]});default:return e.jsx(c,{children:s})}};return e.jsxs(e.Fragment,{children:[e.jsxs(H,{children:[e.jsxs(k,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(S,{className:"text-base",children:"Historique des retraits"}),e.jsxs(l,{size:"sm",onClick:()=>a(!0),children:[e.jsx(p,{className:"h-4 w-4 mr-1"}),"Demander un retrait"]})]}),e.jsx(A,{children:j.length>0?e.jsxs(F,{children:[e.jsx(z,{children:e.jsxs(g,{children:[e.jsx(d,{children:"Date"}),e.jsx(d,{children:"Montant"}),e.jsx(d,{children:"Statut"}),e.jsx(d,{className:"text-right",children:"Détails"})]})}),e.jsx(E,{children:j.map(s=>e.jsxs(g,{children:[e.jsx(i,{className:"font-medium",children:new Date(s.date).toLocaleDateString()}),e.jsxs(i,{children:["$",s.amount]}),e.jsx(i,{children:C(s.status)}),e.jsx(i,{className:"text-right",children:s.txHash?e.jsx(l,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs("a",{href:`https://tronscan.org/#/transaction/${s.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1",children:[e.jsx(R,{className:"h-3 w-3"}),"Tronscan"]})}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})})]},s.id))})]}):e.jsx("div",{className:"text-center py-6",children:e.jsx("p",{className:"text-muted-foreground",children:"Aucun retrait effectué pour le moment"})})})]}),e.jsx(B,{open:N,onOpenChange:a,children:e.jsxs(L,{className:"sm:max-w-md",children:[e.jsx(O,{children:e.jsx(W,{children:"Demande de retrait"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"amount",children:"Montant à retirer (USDT)"}),e.jsx(f,{id:"amount",type:"number",value:t,onChange:s=>m(s.target.value),placeholder:"Entrez le montant",min:"0",step:"0.01"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum: 10 USDT. Frais de transaction: 1 USDT."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"address",children:"Adresse TRON de destination"}),e.jsx(f,{id:"address",value:r,onChange:s=>u(s.target.value),placeholder:"Entrez votre adresse TRON (commence par T)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Assurez-vous que l'adresse est correcte. Les transactions sur la blockchain sont irréversibles."})]})]}),e.jsxs(q,{children:[e.jsx(l,{variant:"outline",onClick:()=>a(!1),children:"Annuler"}),e.jsx(l,{onClick:v,disabled:x||!t||!r,children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 border-2 border-current border-t-transparent animate-spin rounded-full mr-2"}),"Traitement..."]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"h-4 w-4 mr-1"}),"Demander le retrait"]})})]})]})})]})};export{V as default};
//# sourceMappingURL=WithdrawalHistoryCard-DSd9lsgs.js.map
